
          <div class="">
		
             <div class="x_panel">
                <div class="x_title">
					<h2>Cadastrar Fornecedor</h2>    
					<ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>                                           
                    </ul>
				<div class="clearfix"></div>
				</div>
				
            
                        
            <div class="x_content">
					<form>   
            <div class="row">   
            <div class="col-md-1"></div>            
              <div class="form-group">                    
                <div class="col-md-4">    
                  <label class="control-label col-md-12" >Nome do Fornecedor </label>              
                  <input type="text" id="Nempresa" name="NEmpresa" required="required" autofocus class="form-control col-md-2"/>
                </div>   
                <div class="col-md-1">
                  <input id="idEndereco" type="hidden" class="form-control col-md-2 " />
                </div>                           
                <div class="col-md-1"></div>                                  
                <div class="col-md-2">    
                  <label class="control-label col-md-1" >CNPJ</label>  
                  <input type="text" id="cnpj" name="cnpj"  class="form-control col-md-2"/>   
                </div>  
              </div>
            </div>  
            <div class="row">
              <div class="form-group" >
              <div class="col-md-1"></div>                                
                <div class="col-md-4">    
                  <label class="control-label col-md-12" >Endere√ßo</label>              
                  <input type="text" id="endereco" name="endereco"  class="form-control col-md-2"/>                
                </div>                            
              </div>
              <div class="col-md-2"></div>                                  
                <div class="col-md-2">    
                  <label class="control-label col-md-1" >Telefone</label>  
                  <input type="text" id="telefone"  class="form-control col-md-2"/>   
                </div>  
            </div>                        
          </form>
					<br>
          <div class="col-md-5"></div>
          <div >
            <button type="button" id="btnCadastrar" class="btn btn-danger btn-lg">Cadastrar</button>
          </div>		
					</div>
				
            </div>
										                           
        <!-- /page content -->

<script type="text/javascript">
$(function(){

  $('#endereco').autocomplete({
    source: function(request, response){
      $.ajax({
        type: 'get',
        dataType: 'json',
        url: 'http://localhost/ApiSC/public/ruaendereco/'+ request.term +'',
        data: {
          name: request.term                    
        },
        success: function(data){
          response($.map(data, function(item){					
            return {
              label: item.rua,
              value: item.rua,
              id: item.id,					
            }
          }));
        }
      });
    },
    select: function(event, ui){
    // 	event.preventDefault();
      $('#idEndereco').val(ui.item.id);			
    },
    minLength: 0,
    autoFocus: true
  
  });

  $('#btnCadastrar').click(function(){
    var Nempresa = $('#Nempresa').val();
    var telefone = $('#telefone').val();      
    var idEndereco = $('#idEndereco').val();    
    var cnpj = $('#cnpj').val();  
    
    
    if(Nempresa.length != 0){    
      $.ajax({
        url: 'http://localhost/ApiSC/public/fornecedor',
        type: 'post',
        data: {
          nome: Nempresa,
          telefone: telefone,
          cnpj: cnpj,         
          ENDERECO_id: idEndereco
        },
        success: function( data, textStatus, jQxhr ){
          alert('Cadastro de fornecedor realizado com sucesso!');
        },
        error: function( jqXhr, textStatus, errorThrown ){
          console.log( errorThrown );
        }
      });
      $('#Nempresa').val('');      
      $('#cnpj').val(''); 
      $('#endereco').val(''); 
      $('#telefone').val(''); 
      $('#Nempresa').focus(); 
    }else{
      alert('O campo Nome do Fornecedor precisa ser preenchido');
      $('#Nempresa').focus();       
    }
  });
});





</script>